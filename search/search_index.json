{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"georchestra-ldap-py","text":"<p>Thin Python wrapper around the legacy <code>ldap_actions</code> scripts used with geOrchestra LDAP directories. Installable via pip, configurable via environment variables, and consumable as a small API.</p>"},{"location":"#quick-install","title":"Quick install","text":"<pre><code>python3 -m venv .venv\nsource .venv/bin/activate\npip install .\n# or directly from git\n# pip install \"git+https://github.com/jdev-org/georchestra-ldap-py.git\"\n</code></pre>"},{"location":"#configure-env-vars","title":"Configure (env vars)","text":"<p>All settings are read via <code>LdapSettings.from_env()</code> and applied to the legacy <code>config.py</code> in memory. Override as needed:</p> <pre><code>LDAP_SERVER, LDAP_PORT, LDAP_USE_SSL,\nLDAP_USER_DN, LDAP_PASSWORD,\nLDAP_USERS_DN, LDAP_PENDING_USERS_DN, LDAP_ORG_DN, LDAP_ROLE_DN,\nLDAP_SEARCH_BASE, LDAP_MAIL_ATTRIBUTE,\nLDAP_DEFAULT_ROLE_CN, LDAP_DEFAULT_ORG_CN\n</code></pre>"},{"location":"#example-usage","title":"Example usage","text":"<pre><code>from georchestra_ldap import GeorchestraLdapClient, LdapSettings\n\nclient = GeorchestraLdapClient(LdapSettings.from_env())\nclient.create_role(\"FOO\")\nclient.create_user(\"alice\", \"alice@example.org\", \"Alice\", \"Example\", \"Pwd123!\")\nclient.moderate_user(\"alice@example.org\")\nclient.add_user_role(\"alice@example.org\", \"FOO\")\nclient.add_user_org(\"alice@example.org\", \"C2C\")  # moves her out of other orgs first\nclient.read_user_roles(\"alice@example.org\")\n# custom settings example: see examples/custom_config.py\n</code></pre>"},{"location":"#build-publish-the-docs-mkdocs-material","title":"Build &amp; publish the docs (MkDocs Material)","text":"<ul> <li>Build locally: <code>pip install mkdocs mkdocs-material mkdocstrings[python] &amp;&amp; mkdocs build</code></li> <li>Serve locally: <code>mkdocs serve</code> (opens on http://127.0.0.1:8000 by default)</li> <li>Publish to GitHub Pages (requires push rights): <code>mkdocs gh-deploy --force</code></li> <li>Or set up a GitHub Actions workflow (see <code>.github/workflows/docs.yml</code>) that builds the site and deploys to GitHub Pages. Configure Pages to use \u201cGitHub Actions\u201d as the source.</li> </ul>"},{"location":"#legacy-scripts-cli","title":"Legacy scripts (CLI)","text":"Script Function read_user_infos.py Searches for a user by email and displays information: DN, uid, cn, mail, and all groups (<code>memberOf</code>). read_user_roles.py Displays only the LDAP roles of a user (entries under <code>ou=roles</code>). create_user.py Creates a user in <code>ou=pendingusers</code> using proper geOrchestra objectClasses, generates an SSHA password, and automatically assigns the <code>USER</code> role and the <code>C2C</code> organization. moderate_user.py Activates a user by moving them from <code>ou=pendingusers</code> to <code>ou=users</code> without altering roles or organization. add_user_role.py Adds a role (LDAP group) to a user by inserting their DN into the role\u2019s <code>member</code> attribute. remove_user_role.py Removes a user from an existing role. create_role.py Creates a new LDAP role in <code>ou=roles</code> if it does not already exist. delete_role.py Deletes a role after removing all its members. create_org.py Creates a new LDAP organization in <code>ou=orgs</code> if it does not already exist. update_org_user.py Adds a user (DN) to a given organization. update_user_name.py Updates the <code>sn</code> (last name) of a user via their DN. delete_user.py Deletes a user: removes them from all roles and organizations, then deletes the LDAP entry. role_exist.py Checks whether a role exists under <code>ou=roles</code>. get_user_infos.py Returns/prints a user entry by email (DN, uid, cn, mail, memberOf). get_role_infos.py Returns/prints a role entry by cn (DN, description, members). get_user_roles.py Returns/prints the role CNs for a user. get_user_org.py Returns/prints the organization CN for a user. user_is_pending.py Returns True if the user email is in pending users. org_exists.py Returns True if an organization exists under <code>ou=orgs</code>. add_user_org.py Adds a user (by email) to an organization, removing them from other orgs first. get_org_users.py Returns/prints the members (DNs) of an organization. get_role_users.py Returns/prints the members (DNs) of a role."},{"location":"api/client/","title":"GeorchestraLdapClient API","text":""},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient","title":"georchestra_ldap.client.GeorchestraLdapClient","text":"<p>Thin wrapper around the historical scripts in <code>ldap_actions</code> with a simple, importable API. Each method delegates to the matching legacy script while reapplying :class:<code>LdapSettings</code> to the legacy <code>config.py</code>.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient--common-usage-example","title":"Common usage example :","text":"<p>from georchestra_ldap import GeorchestraLdapClient, LdapSettings</p> <p>client = GeorchestraLdapClient(LdapSettings.from_env())</p> <p>client.create_role(\"FOO\")</p> <p>client.create_user(\"alice\", \"alice@example.org\", \"Alice\", \"Example\", \"pwd\")</p> <p>client.moderate_user(\"alice@example.org\")</p> <p>client.add_user_role(\"alice@example.org\", \"FOO\")</p> <p>client.read_user_roles(\"alice@example.org\")</p> <p>client.delete_user(\"alice@example.org\")</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient._run","title":"_run","text":"<pre><code>_run(action_name, func, *args, **kwargs)\n</code></pre> <p>Apply settings, log the action, call the legacy function.</p> <p>Parameters:</p> Name Type Description Default <code>action_name</code> <code>str</code> <p>Friendly action name used for logging.</p> required <code>func</code> <code>callable</code> <p>Legacy function to execute.</p> required <code>*args</code> <p>Positional arguments forwarded to the underlying function.</p> <code>()</code> <code>**kwargs</code> <p>Keyword arguments forwarded to the underlying function.</p> <code>{}</code>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.add_user_org","title":"add_user_org","text":"<pre><code>add_user_org(email, org_cn)\n</code></pre> <p>Add a user (by email) to an organization, removing them from other orgs first.</p> <p>Parameters:</p> Name Type Description Default <code>email</code> <code>str</code> <p>User email.</p> required <code>org_cn</code> <code>str</code> <p>Organization common name.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.add_user_role","title":"add_user_role","text":"<pre><code>add_user_role(email, role_cn)\n</code></pre> <p>Add an existing role to the user identified by email.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.create_org","title":"create_org","text":"<pre><code>create_org(org_cn, org_name=None)\n</code></pre> <p>Create an organization if it does not exist.</p> <p>Parameters:</p> Name Type Description Default <code>org_cn</code> <code>str</code> <p>Common name of the organization.</p> required <code>org_name</code> <code>str | None</code> <p>Optional display name (defaults to <code>org_cn</code>).</p> <code>None</code>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.create_role","title":"create_role","text":"<pre><code>create_role(role_cn, description='Role created via script', members=None)\n</code></pre> <p>Create a role if missing (idempotent); optionally seed members.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.create_user","title":"create_user","text":"<pre><code>create_user(uid, email, given_name, sn, password)\n</code></pre> <p>Create a pending user with geOrchestra objectClasses, USER role, C2C org.</p> <p>Parameters:</p> Name Type Description Default <code>uid</code> <code>str</code> <p>LDAP uid.</p> required <code>email</code> <code>str</code> <p>User email.</p> required <code>given_name</code> <code>str</code> <p>Given name.</p> required <code>sn</code> <code>str</code> <p>Surname.</p> required <code>password</code> <code>str</code> <p>Plain password, hashed before being stored.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.delete_role","title":"delete_role","text":"<pre><code>delete_role(role_cn)\n</code></pre> <p>Delete a role after removing its members.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.delete_user","title":"delete_user","text":"<pre><code>delete_user(email)\n</code></pre> <p>Remove a user from all roles/orgs then delete the entry.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.get_connection","title":"get_connection","text":"<pre><code>get_connection()\n</code></pre> <p>Return an auto-bound ldap3 Connection configured from current settings.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.get_org_users","title":"get_org_users","text":"<pre><code>get_org_users(org_cn)\n</code></pre> <p>Return and print the members (DNs) of an organization.</p> <p>Parameters:</p> Name Type Description Default <code>org_cn</code> <code>str</code> <p>Common name of the organization.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.get_role_infos","title":"get_role_infos","text":"<pre><code>get_role_infos(role_cn)\n</code></pre> <p>Return and print role information (DN, cn, description, members).</p> <p>Parameters:</p> Name Type Description Default <code>role_cn</code> <code>str</code> <p>Common name of the role.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.get_role_users","title":"get_role_users","text":"<pre><code>get_role_users(role_cn)\n</code></pre> <p>Return and print the members (DNs) of a role.</p> <p>Parameters:</p> Name Type Description Default <code>role_cn</code> <code>str</code> <p>Common name of the role.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.get_user_infos","title":"get_user_infos","text":"<pre><code>get_user_infos(email)\n</code></pre> <p>Return and print user information (DN, uid, cn, mail, memberOf).</p> <p>Parameters:</p> Name Type Description Default <code>email</code> <code>str</code> <p>User email.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.get_user_org","title":"get_user_org","text":"<pre><code>get_user_org(email)\n</code></pre> <p>Return and print the organization CN for a given user email.</p> <p>Parameters:</p> Name Type Description Default <code>email</code> <code>str</code> <p>User email.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.get_user_roles","title":"get_user_roles","text":"<pre><code>get_user_roles(email)\n</code></pre> <p>Return and print the list of role CNs for a given user email.</p> <p>Parameters:</p> Name Type Description Default <code>email</code> <code>str</code> <p>User email.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.moderate_user","title":"moderate_user","text":"<pre><code>moderate_user(email)\n</code></pre> <p>Move a user from pending to users if present in pending.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.org_exists","title":"org_exists","text":"<pre><code>org_exists(org_cn)\n</code></pre> <p>Return True if an organization exists under the configured orgs DN.</p> <p>Parameters:</p> Name Type Description Default <code>org_cn</code> <code>str</code> <p>Common name of the organization to check.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.read_user_infos","title":"read_user_infos","text":"<pre><code>read_user_infos(email)\n</code></pre> <p>Print full user info (DN, uid, cn, mail, memberOf).</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.read_user_roles","title":"read_user_roles","text":"<pre><code>read_user_roles(email)\n</code></pre> <p>Print roles (groups under roles DN) for a user email.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.reload_settings","title":"reload_settings","text":"<pre><code>reload_settings(settings=None)\n</code></pre> <p>Update the underlying <code>config.py</code> values, optionally replacing the current :class:<code>LdapSettings</code> instance.</p> <p>Parameters:</p> Name Type Description Default <code>settings</code> <code>LdapSettings | None</code> <p>New settings to apply; if None, reapply the existing instance.</p> <code>None</code>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.remove_user_role","title":"remove_user_role","text":"<pre><code>remove_user_role(email, role_cn)\n</code></pre> <p>Remove a role from the user identified by email.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.role_exists","title":"role_exists","text":"<pre><code>role_exists(role_cn)\n</code></pre> <p>Return True if a role exists under the configured roles DN.</p> <p>Parameters:</p> Name Type Description Default <code>role_cn</code> <code>str</code> <p>Common name of the role to check.</p> required"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.update_lastname","title":"update_lastname","text":"<pre><code>update_lastname(user_dn, new_lastname)\n</code></pre> <p>Replace the <code>sn</code> attribute of a user DN.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.update_user_org","title":"update_user_org","text":"<pre><code>update_user_org(user_dn, org_cn)\n</code></pre> <p>Add a user DN to the given organization group.</p>"},{"location":"api/client/#georchestra_ldap.client.GeorchestraLdapClient.user_is_pending","title":"user_is_pending","text":"<pre><code>user_is_pending(email)\n</code></pre> <p>Return True if the user (by email) is in pending users.</p> <p>Parameters:</p> Name Type Description Default <code>email</code> <code>str</code> <p>User email.</p> required"}]}